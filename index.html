<!DOCTYPE html> <html> <head> <title>Archivist Shared Folder</title> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1">
<!-- OPEN GRAPH TAGS -->
<meta property="og:title" content="Archivist Shared Folder" />
<meta property="og:description" content="Click to import this folder into your Archivist app." />
<meta property="og:image" content="https://boblothian.github.io/archivist-share/icon.png" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://boblothian.github.io/archivist-share" />

<style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif; text-align: center; padding: 40px; color: #333; }
    .btn { display: inline-block; background: #007AFF; color: white; padding: 12px 24px; text-decoration: none; border-radius: 8px; margin-top: 20px; font-weight: bold;}
    img { width: 120px; height: 120px; margin-bottom: 20px; border-radius: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
</style>
</head> <body> <!-- This is the visible content that was missing --> <img src="icon.png" alt="Archivist Logo" /> <h1>Shared Folder</h1> <p>Opening folder in Archivist...</p> <p style="font-size: 0.9em; color: #666;">If nothing happens, you may need to install the app first.</p> <a id="dl-btn" href="#" class="btn">Download App</a>
<script>
    window.onload = function() {
        var params = new URLSearchParams(window.location.search);
        var data = params.get("data");
        
        var iosStore = "https://apps.apple.com/gb/app/archivist-browser/id6756570654";
        var androidStore = "https://play.google.com/store/apps/details?id=com.monodivision.archivist&pcampaignid=web_share";
        
        var userAgent = navigator.userAgent || navigator.vendor || window.opera;
        var isIOS = /iPad|iPhone|iPod/.test(userAgent) && !window.MSStream;

        // Setup the download button's link
        var btn = document.getElementById("dl-btn");
        if (isIOS) {
            btn.href = iosStore;
            btn.innerText = "Download on App Store";
        } else { // Defaults to Android for all non-iOS
            btn.href = androidStore;
            btn.innerText = "Get it on Google Play";
        }

        // If the link has data, attempt to open the app after a delay
        if (data) {
            var customScheme = "archivist://shared-folder?data=" + data;
            
            // **THIS IS THE CHANGE:** Wait 2.5 seconds before trying to open the app
            setTimeout(function() {
                // This will trigger the "Open in app?" dialog
                window.location.href = customScheme;

                // After another brief moment, redirect to the store if the app didn't open
                setTimeout(function() {
                    if (isIOS) {
                        window.location.href = iosStore;
                    } else {
                        window.location.href = androidStore;
                    }
                }, 3000); // 3-second fallback

            }, 2500); // 2.5-second initial delay
        }
    };
</script>
</body> </html>
